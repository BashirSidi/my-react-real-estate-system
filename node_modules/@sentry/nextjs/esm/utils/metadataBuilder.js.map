{"version":3,"file":"metadataBuilder.js","sourceRoot":"","sources":["../../src/utils/metadataBuilder.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,cAAc,CAAC;AAK3C,IAAM,QAAQ,GAAG,0BAA0B,CAAC;AAC5C,IAAM,mBAAmB,GAAG,cAAc,CAAC;AAE3C;;GAEG;AACH;IAIE,yBAAY,OAAsB,EAAE,QAAkB;QACpD,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;IAChC,CAAC;IAEM,wCAAc,GAArB;QACE,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,IAAI,EAAE,CAAC;QACxD,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;IACnD,CAAC;IAEO,qCAAW,GAAnB;QACE,OAAO;YACL,IAAI,EAAE,QAAQ;YACd,OAAO,EAAE,WAAW;YACpB,QAAQ,EAAE,IAAI,CAAC,YAAY,EAAE;SAC9B,CAAC;IACJ,CAAC;IAEO,sCAAY,GAApB;QACE,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,UAAC,OAAe;YAC5C,OAAO;gBACL,IAAI,EAAE,mBAAmB,GAAG,OAAO;gBACnC,OAAO,EAAE,WAAW;aACrB,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IACH,sBAAC;AAAD,CAAC,AA9BD,IA8BC","sourcesContent":["import { SDK_VERSION } from '@sentry/core';\nimport { Package, SdkInfo } from '@sentry/types';\n\nimport { NextjsOptions } from './nextjsOptions';\n\nconst SDK_NAME = 'sentry.javascript.nextjs';\nconst PACKAGE_NAME_PREFIX = 'npm:@sentry/';\n\n/**\n * A builder for the SDK metadata in the options for the SDK initialization.\n */\nexport class MetadataBuilder {\n  private _options: NextjsOptions;\n  private _packageNames: string[];\n\n  constructor(options: NextjsOptions, packages: string[]) {\n    this._options = options;\n    this._packageNames = packages;\n  }\n\n  public addSdkMetadata(): void {\n    this._options._metadata = this._options._metadata || {};\n    this._options._metadata.sdk = this._getSdkInfo();\n  }\n\n  private _getSdkInfo(): SdkInfo {\n    return {\n      name: SDK_NAME,\n      version: SDK_VERSION,\n      packages: this._getPackages(),\n    };\n  }\n\n  private _getPackages(): Package[] {\n    return this._packageNames.map((pkgName: string) => {\n      return {\n        name: PACKAGE_NAME_PREFIX + pkgName,\n        version: SDK_VERSION,\n      };\n    });\n  }\n}\n"]}